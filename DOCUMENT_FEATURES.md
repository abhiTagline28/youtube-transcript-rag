# Document RAG Features

This document describes the new PDF and DOC document processing features added to the YouTube RAG application.

## Features

### 1. Document Upload

- Support for PDF, DOC, and DOCX files
- File size limit: 10MB
- Drag and drop interface
- Automatic text extraction and processing

### 2. Document Management

- View all uploaded documents
- Document metadata (file size, page count, word count)
- Delete documents
- Document descriptions and Q&A pairs generated by AI

### 3. Document RAG Chat

- Chat with individual documents
- Chat with all documents at once
- AI-powered question answering based on document content
- Source citations for answers

## API Endpoints

### Document Upload

- **POST** `/api/documents/upload`
- Upload PDF/DOC files for processing
- Returns document metadata and analysis

### Document Management

- **GET** `/api/documents` - List user's documents
- **DELETE** `/api/documents?id={documentId}` - Delete a document

### Document Chat

- **POST** `/api/documents/chat`
- Body: `{ question: string, documentId?: string }`
- Chat with documents using RAG

### Document Statistics

- **GET** `/api/documents/stats`
- Get document statistics for dashboard

## Database Schema

### Document Model

```typescript
interface IDocument {
  userId: ObjectId;
  fileName: string;
  originalName: string;
  fileType: "pdf" | "doc" | "docx";
  fileSize: number;
  filePath: string;
  extractedText: string;
  pageCount?: number;
  wordCount?: number;
  description?: string;
  qaPairs?: Array<{
    question: string;
    answer: string;
  }>;
  createdAt: Date;
  updatedAt: Date;
}
```

## File Processing

### Supported Formats

- **PDF**: Uses `@langchain/community/document_loaders/fs/pdf`
- **DOC/DOCX**: Uses `@langchain/community/document_loaders/fs/docx`

### Processing Pipeline

1. File validation (type and size)
2. Text extraction using LangChain loaders
3. AI analysis for description and Q&A generation
4. Text chunking for vector storage
5. Vector embedding and storage in ChromaDB

## Vector Store Integration

Documents are processed and stored in the same vector store as YouTube transcripts:

- Collection: "youtube-transcripts"
- Document type: "document"
- Metadata includes: documentId, fileName, userId, type

## UI Components

### DocumentUpload

- Drag and drop file upload
- File validation and error handling
- Upload progress indication

### DocumentList

- Grid view of uploaded documents
- Document selection for chat
- Delete functionality
- Document metadata display

### DocumentChat

- Chat interface for documents
- Support for specific document or all documents
- Source citations
- Message history

## Navigation

Added "Documents" navigation item to the main navigation bar with document icon.

## Dashboard Integration

Updated main dashboard to include:

- Documents card in main action grid
- Document statistics in content overview
- Total documents, document words, and pages count

## Dependencies Added

- `uuid`: For generating unique file names
- `@types/uuid`: TypeScript types for uuid

## File Storage

Documents are stored in the `uploads/documents/` directory with UUID-based filenames to prevent conflicts.

## Error Handling

- File type validation
- File size validation
- Text extraction error handling
- Vector store error handling
- Cleanup of failed uploads

## Security

- User authentication required for all document operations
- User-specific document access (documents are filtered by userId)
- File type restrictions
- File size limits

